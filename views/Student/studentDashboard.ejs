<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Dashboard | IGConnect</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.4/lottie.min.js"></script>
  <style>
    html {
      scroll-behavior: smooth;
    }

    .hover-grow {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .hover-grow:hover {
      transform: scale(1.03);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fefeff;
      margin: 0;
      padding: 0;
    }

    .navbar {
      background: #ffffff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .navbar-brand {
      font-weight: bold;
      color: #0077b6 !important;
      font-size: 1.4rem;
    }

    .navbar-nav .nav-link {
      color: #002244;
      font-weight: 500;
      transition: 0.3s;
    }

    .navbar-nav .nav-link:hover,
    .navbar-nav .nav-link.active {
      color: #0077b6;
    }

    .btn-outline-primary {
      border-radius: 30px;
      padding: 0.4rem 1.2rem;
    }

    .hero {
      background: linear-gradient(to right, #e0f0ff, #fefeff);
      position: relative;
      height: 400px;
      overflow: hidden;
      text-align: center;
    }

    #lottie-welcome svg {
      width: 100% !important;
      height: 100% !important;
    }

    .hero .overlay {
      background: rgba(0, 0, 0, 0.4);
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      z-index: 1;
    }

    .hero .content {
      z-index: 2;
      position: relative;
      color: white;
    }

    .stats-card {
      background: #ffffff;
      border-radius: 14px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease;
    }

    .stats-card:hover {
      transform: translateY(-5px);
    }

    .section-title {
      font-weight: 700;
      font-size: 1.8rem;
      color: #002244;
      margin-top: 60px;
      margin-bottom: 20px;
      text-align: center;
    }

    .card-style {
      border-radius: 14px;
      background: #ffffff;
      padding: 25px;
      height: 100%;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease;
    }

    .card-style:hover {
      transform: translateY(-5px);
    }

    .fallback-card {
      background: #fff;
      text-align: center;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      padding: 30px;
      font-weight: 500;
    }

    .icon {
      font-size: 2.2rem;
      margin-bottom: 12px;
    }

    .fa-calendar-days { color: #34a0a4; }
    .fa-people-group { color: #0077b6; }
    .fa-bullhorn { color: #f94144; }

    footer {
      background: #002244;
      color: #fff;
      padding: 40px 0;
    }

    #scrollTopBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 999;
      display: none;
    }
  </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light sticky-top">
  <div class="container">
    <a class="navbar-brand" href="/student/home">
      <img src="/Images/IGConnect-logo-transparent.png" width="150" alt="IGConnect Logo" />
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav me-3">
        <li class="nav-item"><a class="nav-link <% if (activePage === 'events') { %>active<% } %>" href="/events"><i class="fa fa-calendar-days me-1"></i> Events</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'igs') { %>active<% } %>" href="/igs"><i class="fa fa-people-group me-1"></i> IGs</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'announcements') { %>active<% } %>" href="/announcements"><i class="fa fa-bullhorn me-1"></i> Announcements</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'profile') { %>active<% } %>" href="/profile"><i class="fa fa-user me-1"></i> Profile</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'achievements') { %>active<% } %>" href="/achievements"><i class="fa fa-trophy me-1"></i> Achievements</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'gallery') { %>active<% } %>" href="/gallery"><i class="fa fa-image me-1"></i> Gallery</a></li>
        <li class="nav-item"><a class="nav-link <% if (activePage === 'schedule') { %>active<% } %>" href="/schedule"><i class="fa fa-clock me-1"></i> Schedule</a></li>
      </ul>
      <a href="/logout" class="btn btn-outline-primary">
        <i class="fa fa-sign-out-alt me-1"></i> Logout
      </a>
    </div>
  </div>
</nav>


<!-- Hero -->
<div class="hero d-flex align-items-center justify-content-center">
  <div id="lottie-welcome" class="position-absolute top-0 start-0 w-100 h-100"></div>
  <div class="overlay"></div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-10 col-lg-8 text-center content">
        <h1 class="fw-bold display-5 text-white">Welcome, <%= student.fullname %>!</h1>
        <p class="lead text-white">Your personalized IGConnect experience starts here.</p>
        <a href="#dashboard" class="btn btn-danger mt-3">Explore Dashboard</a>
      </div>
    </div>
  </div>
</div>

<!-- Dashboard Section -->
<div id="dashboard" class="container py-5 my-4">
  <!-- Stats -->
  <div class="row g-4 text-center">
    <div class="col-md-4">
      <div class="stats-card">
        <div class="icon"><i class="fa fa-people-group"></i></div>
        <h5><%= interestGroups.length %> Joined IGs</h5>
      </div>
    </div>
    <div class="col-md-4">
      <div class="stats-card">
        <div class="icon"><i class="fa fa-calendar-days"></i></div>
        <h5><%= events.length %> Upcoming Events</h5>
      </div>
    </div>
    <div class="col-md-4">
      <div class="stats-card">
        <div class="icon"><i class="fa fa-bullhorn"></i></div>
        <h5><%= announcements.length %> Announcements</h5>
      </div>
    </div>
  </div>

  <!-- Events -->
  <h2 class="section-title">Upcoming Events</h2>
  <div class="row g-4">
    <% if (events.length > 0) { %>
      <% events.forEach(event => { %>
        <div class="col-md-4">
          <div class="card-style">
            <h5><%= event.title %></h5>
            <p><%= event.description %></p>
            <p class="text-muted"><i class="fa fa-clock"></i> <%= event.date.toDateString() %></p>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-12">
        <div class="row shadow rounded p-4 align-items-center hover-grow">
          <div class="col-md-6 text-center">
            <img src="/Images/admin_background.jpg" class="img-fluid rounded" style="max-height: 200px;" />
          </div>
          <div class="col-md-6 text-center">
            <h5>No upcoming events at the moment. Stay tuned!</h5>
            <a href="/events" class="btn btn-danger mt-2">Explore Events Now</a>
          </div>
        </div>
      </div>
    <% } %>
  </div>

  <!-- Interest Groups -->
  <h2 class="section-title">My Interest Groups</h2>
  <div class="row g-4">
    <% if (interestGroups.length > 0) { %>
      <% interestGroups.forEach(group => { %>
        <div class="col-md-4">
          <div class="card-style hover-grow">
            <h5><%= group.name %></h5>
            <p><%= group.description %></p>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-12">
        <div class="row shadow rounded p-4 align-items-center hover-grow">
          <div class="col-md-6 text-center">
            <img src="/Images/admin_background.jpg" class="img-fluid rounded" style="max-height: 200px;" />
          </div>
          <div class="col-md-6 text-center">
            <h5>You haven’t joined any IGs yet.</h5>
            <a href="/igs" class="btn btn-danger mt-2">Explore IGs</a>
          </div>
        </div>
      </div>
    <% } %>
  </div>

  <!-- Announcements -->
  <h2 class="section-title">Latest Announcements</h2>
  <div class="row g-4">
    <% if (announcements.length > 0) { %>
      <% announcements.forEach(a => { %>
        <div class="col-md-4">
          <div class="card-style hover-grow h-100 d-flex flex-column justify-content-between">
            <div>
              <h5 class="text-danger"><i class="fa fa-bullhorn me-2"></i><%= a.title %></h5>
              <p class="text-muted"><%= a.message %></p>
            </div>
            <div>
              <small class="text-muted"><i class="fa fa-clock me-1"></i> <%= new Date(a.created_at).toLocaleString() %></small>
            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-12">
        <div class="fallback-card">
          <i class="fa fa-bullhorn fa-2x mb-3 text-muted"></i><br>
          No announcements have been made recently.
        </div>
      </div>
    <% } %>
  </div>

  <!-- Achievements -->
  <h2 class="section-title">Your Achievements</h2>
  <div class="row g-4">
    <% if (achievements.length > 0) { %>
      <% achievements.forEach(achievement => { %>
        <div class="col-md-4">
          <div class="card-style hover-grow">
            <h5><%= achievement.title %></h5>
            <p><%= achievement.description %></p>
            <p class="text-muted"><i class="fa fa-award"></i> Awarded on: <%= new Date(achievement.date_awarded).toLocaleDateString() %></p>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col-12">
        <div class="row shadow rounded p-4 align-items-center hover-grow">
          <div class="col-md-6 text-center">
            <img src="/Images/no_achievements.png" class="img-fluid rounded" style="max-height: 200px;" />
          </div>
          <div class="col-md-6 text-center">
            <h5>No achievements recorded yet. Keep striving!</h5>
            <a href="/opportunities" class="btn btn-danger mt-2">Explore Opportunities</a>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</div>

<div class="container my-5">

  <!-- Trending Section -->
  <div class="card shadow p-4 mb-5">
    <h2 class="section-title">🔥 Trending Now</h2>
    <div class="row g-4">
      <div class="col-md-6">
        <div class="card-style hover-grow">
          <h5><i class="fa fa-fire text-danger me-2"></i>Trending IG: Photography Club</h5>
          <p>Capture stories through lenses! Most active IG this month!</p>
          <a href="/igs/photography" class="btn btn-sm btn-outline-danger">View IG</a>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card-style hover-grow">
          <h5><i class="fa fa-bolt text-warning me-2"></i>Hot Event: Campus Talent Hunt</h5>
          <p>Don't miss this month’s showcase of RP’s best talents!</p>
          <a href="/events/talent-hunt" class="btn btn-sm btn-outline-warning">See Details</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Event Calendar Section -->
  <div class="card shadow p-4 mb-5 text-center">
    <h2 class="section-title">Event Calendar</h2>
<div class="d-flex justify-content-center align-items-center my-4">
  <img src="/Images/DeskCalendar.jpg" alt="Calendar Placeholder" class="img-fluid rounded" style="height: 100px; width: 100px;">
</div>
    <p class="text-muted">Interactive calendar coming soon! Stay tuned.</p>
  </div>

  <!-- Student Leaderboard -->
  <div class="card shadow p-4 mb-5">
    <h2 class="section-title">🏆 Student Leaderboard</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Points</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Jamie Tan</td><td>1520</td></tr>
          <tr><td>2</td><td>Marcus Lee</td><td>1435</td></tr>
          <tr><td>3</td><td>Shanice Wong</td><td>1370</td></tr>
          <tr><td>4</td><td>You</td><td>1290</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Testimonials / Social Highlights -->
<div class="card p-5 mb-5 text-white" style="background: #1a2238; border-radius: 16px;">
  <h2 class="section-title text-white text-center mb-4">What Students Say</h2>
  <div id="testimonialCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner text-center">

      <!-- Testimonial 1 -->
      <div class="carousel-item active">
        <img src="/Images/Avatar1.png" class="rounded-circle mb-4 shadow" style="width: 100px; height: 100px; object-fit: cover;" alt="Amanda">
        <blockquote class="blockquote">
          <p class="mb-3 fs-5 fst-italic">"Joining the Music IG helped me find my voice and confidence!"</p>
          <footer class="blockquote-footer text-light opacity-75">Amanda, Year 2 DMC</footer>
        </blockquote>
      </div>

      <!-- Testimonial 2 -->
      <div class="carousel-item">
        <img src="/Images/Avatar2.png" class="rounded-circle mb-4 shadow" style="width: 100px; height: 100px; object-fit: cover;" alt="Rahul">
        <blockquote class="blockquote">
          <p class="mb-3 fs-5 fst-italic">"The coding bootcamp organized by Tech IG was <i class="fa fa-fire text-danger"></i>!"</p>
          <footer class="blockquote-footer text-light opacity-75">Rahul, Year 1 DIT</footer>
        </blockquote>
      </div>

    </div>

    <!-- Controls -->
    <button class="carousel-control-prev" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon bg-dark rounded-circle p-2"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#testimonialCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon bg-dark rounded-circle p-2"></span>
    </button>
  </div>
</div>


<!-- Join a New Interest Group -->
<div class="card shadow p-4 mb-5">
  <h2 class="section-title">Request to Join an Interest Group</h2>
  <form action="/request-ig" method="POST">
    <div class="mb-3">
      <label for="ig_id" class="form-label">Select IG</label>
      <select class="form-select" name="ig_id" id="ig_id" required>
        <% allIGs.forEach(ig => { %>
          <option value="<%= ig.id %>"><%= ig.name %></option>
        <% }) %>
      </select>
    </div>
    <div class="mb-3">
      <label for="reason" class="form-label">Why do you want to join?</label>
      <textarea name="reason" id="reason" class="form-control" rows="3" placeholder="Tell us briefly..." required></textarea>
    </div>
    <button type="submit" class="btn btn-danger">Send Request</button>
  </form>
</div>


</div>


 
</div>

<!-- END DASHBOARD -->

<!-- Footer -->
<footer class="text-center mt-5">
  <div class="container">
    <p class="mb-1">&copy; <%= new Date().getFullYear() %> IGConnect. All rights reserved.</p>
    <p class="small">Empowering students through meaningful interest group experiences.</p>
  </div>
</footer>

<!-- Scroll to Top Button -->
<button onclick="scrollToTop()" id="scrollTopBtn" class="btn btn-danger rounded-circle shadow">
  <i class="fa fa-arrow-up"></i>
</button>

<script>
  // Scroll to top
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  window.onscroll = function() {
    document.getElementById("scrollTopBtn").style.display =
      window.pageYOffset > 300 ? "block" : "none";
  };

  // Lottie animation
  lottie.loadAnimation({
    container: document.getElementById('lottie-welcome'),
    renderer: 'svg',
    loop: true,
    autoplay: true,
    path: 'https://lottie.host/4d3d005b-c9fd-42af-aec8-bdab3577291f/Z0UPikuoWc.json'
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
